[gd_scene load_steps=4 format=3 uid="uid://cks8xhba2cqg3"]

[sub_resource type="GDScript" id="GDScript_mfbnb"]
script/source = "extends Node2D

class_name VibratingText

@export var TextColor : Color = Color(186,186,186)
@export var Text : String = \"Texte vibrant\"
@export var Shake : int = 20
@export var Speed : int = 5

@onready var label : Label = $Text

var Shaking : bool = true
var shakeRectangle : Vector2i
var initialPos : Vector2i

var howManyFramesBeforeMovement : int = 0

func _ready():
	label.text = \"Text\"
	label.label_settings.font_color = TextColor
	shakeRectangle = Vector2i(label.get_rect().size.x/Shake, label.get_rect().size.y/Shake)
	initialPos = Vector2(global_position.x - label.get_rect().size.x,global_position.y)

func _process(_delta):
	if (Shaking):
		global_position = Vector2i(initialPos.x + (randi_range(-shakeRectangle.y,shakeRectangle.y)),
		initialPos.y + (randi_range(-shakeRectangle.y,shakeRectangle.y)))

func stopsShaking():
	Shaking = false
	z_index -= z_index
	
func resumeShaking():
	Shaking = true
	
func showGoodMessage():
	label.text = \"Vrai ! Correct !\"
	label.label_settings.font_color = Color(0,255,0)
	
func showBadMessage():
	label.text = \"Faux ! Wrong !\"
	label.label_settings.font_color = Color(255,0,0)
"

[sub_resource type="SystemFont" id="SystemFont_vn785"]

[sub_resource type="LabelSettings" id="LabelSettings_xft45"]
font = SubResource("SystemFont_vn785")
font_size = 41
font_color = Color(0.647059, 0.647059, 0.647059, 1)

[node name="VibratingText" type="Node2D"]
script = SubResource("GDScript_mfbnb")
TextColor = Color(1, 1, 1, 1)

[node name="Text" type="Label" parent="."]
offset_right = 40.0
offset_bottom = 23.0
label_settings = SubResource("LabelSettings_xft45")
